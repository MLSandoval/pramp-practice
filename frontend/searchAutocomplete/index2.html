<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Search Autocomplete</title>
    <!-- Included some basic styling, change at will -->
    <link rel="stylesheet" type="text/css" href="https://cdn.rawgit.com/prampcontent/3ea04cbd0f61a798e96afbe5d31ec2f9/raw/e879e32222b543b29a168daa089e2f9f28cf9eb2/autocomplete.css">
</head>
<body>
<form class="search-form">
    <input id="searchField" type="text" class="search-input" placeholder="Start typing a movie title...">
    <ul id="results" class="results"></ul>
</form>
<!-- Helper code to provide a search API for mock data -->
<script src="https://cdn.rawgit.com/prampcontent/180077452f9279073cab1035f60d30cf/raw/9cbf891a80bad9ad09c6261ef9578a65502922cc/search_helper.js"></script>
<!-- <script>
/*

[
{Object:{
rating:9.2,
title:"Gladiator (2000)"
}}
]

*/
  // document.addEventListener("DOMContentLoaded", async ()=>{
  //   assignEventHandlers();
  // })
  
  // const assignEventHandlers = () => {
  //   const inputSearchField = document.querySelector("#searchField");
  //   const result = document.querySelector("#results");

  //   inputSearchField.addEventListener('input',getData, false)
  // }
  
  // async function getData(event){

  //   event.preventDefault();
  //   result.innerHTML = "";
  //   const value = event.target.value;

  //   console.log("event.target.value: ", event.target.value);

  //   const regEx = new Regex(value);
  //   const dataResult = await searchData().resolve();

  //   const filteredSearchResult = dataResult.filter((item)=>{
  //     console.log("egEx.test(item.title): ", egEx.test(item.title));
  //     regEx.test(item.title)
  //   })
    
  //   if(filteredSearchResult.length > 0){
  //     filteredSearchResult.map((item, index)=>{
  //       let list = document.createElement('li');
  //       list.textContent = item.title;
  //       result.append(list);
  //     })
  //   }
  //   return 
  // }
  
  

  
</script> -->

<script>
  /*
  
  [
  {Object:{
  rating:9.2,
  title:"Gladiator (2000)"
  }}
  ]
  
  */
   // meet.google.com/woj-vqsq-zyg
    
  window.addEventListener("load", async ()=>{
    const inputSearchField = document.querySelector("#searchField");
    const result = document.querySelector("#results");
    
    inputSearchField.addEventListener('keyup',getData, false)
    
    async function getData(event){
      event.preventDefault();
      result.innerHTML = "";
      const value = event.target.value;
      const regEx = new RegExp(value);
      const dataResult = await searchData();
      const filteredSearchResult = dataResult.filter((item)=>regEx.test(item.title))
      
      if(filteredSearchResult.length > 0){
        filteredSearchResult.map((item, index)=>{
          let list = document.createElement('li');
          list.textContent = item.title;
          result.append(list);
        })
      }
      return 
    }
    
  })
    
  </script>
</body>
</html>